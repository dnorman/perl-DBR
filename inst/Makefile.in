PERL      = @PERL@
PERLVER   = @PERL_VERSION@

MAKE	  = @MAKE@

DESTDIR   = @INSTALL_PATH@
CTARGETS  = Makefile perl-DBR.spec config.log config.status
DCTARGETS = configure
MCTARGETS = autom4te.cache configure.ac

all: prep
	@./make-makefile src
	@echo "Type '$(MAKE) install' to install the library to $(DESTDIR)."

install:
	@echo "Installing DBR to $(DESTDIR) ..."
	cd src && $(MAKE) DESTDIR=$(DESTDIR) install

test:
	cd examples && $(PERL) -I../src -w basic.pl

prep:
	$(PERL) -e 'use lib qw(./src); use DBR; print "$$DBR::VERSION\n";'

clean: 
	$(RM) -rf $(CTARGETS)

distclean: clean
	$(RM) -rf $(DCTARGETS)

maintainer-clean: distclean
	$(RM) -rf $(MCTARGETS)

.PHONY: prep test maintainer-clean
